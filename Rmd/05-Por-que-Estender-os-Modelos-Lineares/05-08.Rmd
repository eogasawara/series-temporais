---
title: "Aula 05 - Slide 08"
output: html_document
---

## Objetivo
Reproduzir a figura/resultado do slide 08 da Aula 05.

## Descricao
Este documento explica o passo a passo do codigo para gerar a figura/resultado associado ao slide.

## Conexao com o PDF
Slide 08 do PDF correspondente da Aula 05.

## Referencia
Hyndman, R.J., Athanasopoulos, G. (2021). Forecasting: Principles and Practice (3rd ed.). OTexts.

```{r codigo, message=FALSE, warning=FALSE}
# Didatico: roteiro em 3 passos
# 1) Carregar dependencias/rotinas auxiliares.
# 2) Preparar dados e parametros do exemplo.
# 3) Gerar a figura/resultado esperado.
# Aula 05 — Slide 08
# Exemplo de SARIMA
# Este script gera a(s) figura(s) em PNG na pasta slides/ e também cria um .Rmd documentado.

source("https://raw.githubusercontent.com/eogasawara/series-temporais/main/code/utils.R")

if (!requireNamespace("forecast", quietly = TRUE)) install.packages("forecast")
if (!requireNamespace("ggplot2", quietly = TRUE)) install.packages("ggplot2")

library(forecast)
library(ggplot2)

set.seed(5)

# Simular um processo com componente AR regular e sazonal (m=12)
# (didático) Geramos AR(1) + sazonalidade determinística e depois ajustamos SARIMA
n <- 12 * 8
t <- 1:n
ar_part <- arima.sim(model = list(ar = 0.6), n = n)
season <- 1.0 * sin(2*pi*t/12)
x <- as.numeric(ar_part) + season
x_ts <- ts(x, frequency = 12)

# Ajuste SARIMA didático: (1,1,1)(1,1,1)[12]
fit <- Arima(x_ts, order=c(1,1,1), seasonal=c(1,1,1))

fc <- forecast(fit, h=24)
p <- autoplot(fc) + ggtitle("SARIMA(1,1,1)(1,1,1)[12] — ajuste e previsão")

out_png <- har_slide_file("05", "08")
har_ggsave_px(out_png, p)
message("PNG gerado em: ", out_png)
```


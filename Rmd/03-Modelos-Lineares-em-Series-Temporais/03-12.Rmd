---
title: "Aula 03 - Slide 12"
output: html_document
---

## Objetivo
Reproduzir a figura/resultado do slide 12 da Aula 03.

## Descricao
Este documento explica o passo a passo do codigo para gerar a figura/resultado associado ao slide.

## Conexao com o PDF
Slide 12 do PDF correspondente da Aula 03.

## Referencia
Hyndman, R.J., Athanasopoulos, G. (2021). Forecasting: Principles and Practice (3rd ed.). OTexts.

```{r codigo, message=FALSE, warning=FALSE}
# Didatico: roteiro em 3 passos
# 1) Carregar dependencias/rotinas auxiliares.
# 2) Preparar dados e parametros do exemplo.
# 3) Gerar a figura/resultado esperado.
source("https://raw.githubusercontent.com/eogasawara/series-temporais/main/code/utils.R")

set.seed(3)
n <- 350

# MA(2): X_t = eps_t + 0.6 eps_{t-1} - 0.3 eps_{t-2}
x <- stats::arima.sim(model = list(ma = c(0.6, -0.3)), n = n)
x <- ts(x)

# a) série
p1 <- forecast::autoplot(x) +
  ggplot2::labs(title = "Série MA(2) simulada", x = "Tempo", y = "Xt")
f_a <- har_slide_file(3, 12, "a")
har_ggsave_px(f_a, p1, width_px = TSED_WIDTH, height_px = TSED_HEIGHT, dpi = TSED_DPI)

# b) ACF (corte em q=2)
f_b <- har_slide_file(3, 12, "b")
grDevices::png(filename = f_b, width = TSED_WIDTH, height = TSED_HEIGHT, res = TSED_DPI)
stats::acf(x, main = "ACF do MA(2): corte abrupto após q=2")
grDevices::dev.off()

# concat final
f_out <- har_slide_file(3, 12)
har_concat_png(f_out, c(f_a, f_b))
```


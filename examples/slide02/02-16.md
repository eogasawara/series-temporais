---
title: "Aula 02 - Slide 16: Serie AR(1) e ACF"
output: html_document
---

## Objetivo
Gerar uma serie AR(1) e sua ACF para conectar formula e dependencia temporal.

## Conexao com o PDF
Slide 16 do PDF `02-Estrutura-Temporal-em-Series-Temporais.pdf`, arquivos de saida `slides/02-16a.png`, `slides/02-16b.png` e `slides/02-16.png`.

## Descricao do codigo
Simula um AR(1), plota a serie e a ACF, e concatena as imagens.


``` r
source("https://raw.githubusercontent.com/eogasawara/series-temporais/main/code/utils.R")
set.seed(216)
```


``` r
n <- 250
phi <- 0.8

x <- arima.sim(model = list(ar = phi), n = n)
x_ts <- ts(x)

# (a) Serie AR(1)
p_a <- forecast::autoplot(x_ts) +
  ggplot2::labs(x = NULL, y = NULL, title = paste0("Serie AR(1) simulada (phi = ", phi, ")"))

fa <- har_slide_file("02", "16", "a")
har_ggsave_px(fa, p_a, height_px = TSED_HEIGHT)

# (b) ACF
fb <- har_slide_file("02", "16", "b")
grDevices::png(fb, width = TSED_WIDTH, height = TSED_HEIGHT, res = TSED_DPI)
stats::acf(x, main = "ACF do AR(1): decai geometricamente")
grDevices::dev.off()
```

```
## png 
##   2
```

``` r
# Composicao final do slide
out <- har_slide_file("02", "16")
har_concat_png(out, c(fa, fb))
```
